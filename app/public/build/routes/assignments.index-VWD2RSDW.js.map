{
  "version": 3,
  "sources": ["../../../app/routes/assignments.index.tsx"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app\\\\\\\\routes\\\\\\\\assignments.index.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app\\\\routes\\\\assignments.index.tsx\");\n  import.meta.hot.lastModified = \"1745309159618.5696\";\n}\n// REMIX HMR END\n\nimport { json } from \"@remix-run/node\";\nimport { useLoaderData, Link } from \"@remix-run/react\";\nimport { AssignacioService } from \"~/services/assignacio.service\";\nimport { LeadService } from \"~/services/leads.service\";\nimport { AgentService } from \"~/services/agents.service\";\nimport { handleApiError } from \"~/lib/api/client\";\n\n// Definimos un tipo espec\u00EDfico para los datos del loader\n\nexport const loader = async ({\n  request\n}) => {\n  try {\n    const [assignacions, leads, agents] = await Promise.all([AssignacioService.getAll(0, 5), LeadService.getAll(0, 5), AgentService.getAll()]);\n\n    // Calcular m\u00E9tricas\n    const pendingAssignments = assignacions.filter(a => a.estat_fitxes_assignacions === \"Pendiente\").length;\n    const inProgressAssignments = assignacions.filter(a => a.estat_fitxes_assignacions === \"En progreso\").length;\n    const completedAssignments = assignacions.filter(a => a.estat_fitxes_assignacions === \"Completada\").length;\n\n    // Retornamos la data con las m\u00E9tricas calculadas\n    return json({\n      recentAssignments: assignacions,\n      recentLeads: leads,\n      agents,\n      metrics: {\n        totalAssignments: assignacions.length,\n        pendingAssignments,\n        inProgressAssignments,\n        completedAssignments,\n        totalLeads: leads.length,\n        totalAgents: agents.length\n      }\n    });\n  } catch (error) {\n    return handleApiError(error);\n  }\n};\nexport default function Index() {\n  _s();\n  // Extraemos la data del loader\n  const data = useLoaderData();\n\n  // Fallbacks \n  const recentAssignments = data.recentAssignments || [];\n  const metrics = data.metrics || {\n    totalAssignments: 0,\n    pendingAssignments: 0,\n    inProgressAssignments: 0,\n    completedAssignments: 0,\n    totalLeads: 0,\n    totalAgents: 0\n  };\n  return <div className=\"space-y-6\">\n      <h1 className=\"text-2xl font-bold mb-6\">Dashboard</h1>\n      \n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <div className=\"bg-white rounded-lg shadow p-6\">\n          <h3 className=\"text-gray-500 text-sm font-medium\">ASIGNACIONES</h3>\n          <div className=\"flex items-center mt-2\">\n            <div className=\"text-3xl font-bold\">{metrics.totalAssignments}</div>\n            <div className=\"ml-auto flex flex-col\">\n              <span className=\"text-green-500 flex items-center text-sm\">\n                <span className=\"mr-1\">\u2713</span> {metrics.completedAssignments} completadas\n              </span>\n              <span className=\"text-yellow-500 flex items-center text-sm\">\n                <span className=\"mr-1\">\u27F3</span> {metrics.inProgressAssignments} en progreso\n              </span>\n              <span className=\"text-blue-500 flex items-center text-sm\">\n                <span className=\"mr-1\">\u25EF</span> {metrics.pendingAssignments} pendientes\n              </span>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"bg-white rounded-lg shadow p-6\">\n          <h3 className=\"text-gray-500 text-sm font-medium\">LEADS</h3>\n          <div className=\"flex items-center mt-2\">\n            <div className=\"text-3xl font-bold\">{metrics.totalLeads}</div>\n            <div className=\"ml-auto\">\n              {/* Se han eliminado los botones interactivos */}\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"bg-white rounded-lg shadow p-6\">\n          <h3 className=\"text-gray-500 text-sm font-medium\">AGENTES</h3>\n          <div className=\"flex items-center mt-2\">\n            <div className=\"text-3xl font-bold\">{metrics.totalAgents}</div>\n            <div className=\"ml-auto\">\n              <Link to=\"/agents\" className=\"bg-gray-600 text-white px-3 py-1 rounded text-sm hover:bg-gray-700\">\n                Ver agentes\n              </Link>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      {/* Asignaciones recientes (versi\u00F3n solo de lectura, sin botones interactivos) */}\n      <div className=\"bg-white rounded-lg shadow\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h2 className=\"text-lg font-medium\">Asignaciones recientes</h2>\n        </div>\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">ID</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Lead</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Agente</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Estado</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Prioridad</th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {recentAssignments.map(assignment => <tr key={assignment.id_fitxes_asignacions} className=\"hover:bg-gray-50\">\n                  <td className=\"px-6 py-4 whitespace-nowrap\">{assignment.id_fitxes_asignacions}</td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">{assignment.id_leads}</td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">{assignment.id_agents}</td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full \n                      ${assignment.estat_fitxes_assignacions === \"Pendiente\" ? \"bg-blue-100 text-blue-800\" : assignment.estat_fitxes_assignacions === \"En progreso\" ? \"bg-yellow-100 text-yellow-800\" : assignment.estat_fitxes_assignacions === \"Completada\" ? \"bg-green-100 text-green-800\" : \"bg-red-100 text-red-800\"}`}>\n                      {assignment.estat_fitxes_assignacions}\n                    </span>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">{assignment.prioritat_fitxes_assignacions}</td>\n                </tr>)}\n            </tbody>\n          </table>\n        </div>\n      </div>      \n    </div>;\n}\n_s(Index, \"5thj+e1edPyRpKif1JmVRC6KArE=\", false, function () {\n  return [useLoaderData];\n});\n_c = Index;\nvar _c;\n$RefreshReg$(_c, \"Index\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": "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",
  "names": []
}
